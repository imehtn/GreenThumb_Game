#include <FEHLCD.h>
#include <FEHImages.h>
#include <FEHUtility.h>

void welcome();
void header();
void buttons();
void credit_screen();
void stats_screen();
void rules_screen();
void createScreen(const char* imageFilename);


int main(void)
{    
    welcome();
    header();
    buttons();

    while(1) 
    {
        LCD.Update(); //Never quit s
    }
    return 0;
}

void welcome()
{
    FEHImage titlePage("Title Page.png");
    titlePage.Draw(0,0);
}


void header()
{
    FEHImage start ("start.png");
    start.Draw(65,213);
    
    FEHImage stats ("stats.png");
    stats.Draw(110,213);

    FEHImage rules("rules.png");
    rules.Draw(155,213);

    FEHImage credit ("credit.png");
    credit.Draw(203,212);
}

void handleButtons(float a, float b, FEHIcon::Icon& button, void Screen())
{
    if (button.Pressed(a,b,0))
    {
        button.WhilePressed(a,b);
        button.Deselect();
        Screen();
    }
}

void buttons()
{
    FEHIcon::Icon start;
    start.SetProperties("",65,213,30,30,1,1);
    start.Draw();

    FEHIcon::Icon stats;
    stats.SetProperties("",110,213,30,30,1,1);//press this, go into stats page, press quit
    stats.Draw();

    FEHIcon::Icon rules;
    rules.SetProperties("",155,213,30,30,1,1);//go into instructions, press quit
    rules.Draw();

    FEHIcon::Icon credits;
    credits.SetProperties("",203,213,30,30,1,1);//go to instructions, press quit
    credits.Draw();
    
    float a,b;
    while(true)
    {
        LCD.Touch(&a,&b);
        if (start.Pressed(a,b,0))
        {
            // Handle button presses
            handleButtons(a, b, start, rules_screen); //press this and go into actual game
        }
        else if (rules.Pressed(a,b,0))
        {
            handleButtons(a, b, rules, rules_screen);//make screen
        }
        else if(stats.Pressed(a,b,0))
        {
            handleButtons(a, b, stats, stats_screen);//make screen
        }
        else if(credits.Pressed(a,b,0))
        {
            handleButtons(a, b, credits, credit_screen);//credit screen
        }

        header();
    }
}

void createScreen(const char* imageFilename)
{
    FEHImage screen;
    screen.Open(imageFilename);  // Load the screen image from the given file
    screen.Draw(10, 0);  // Draw the image at the specified position
}

void credit_screen()
{
    createScreen("inventoryScreen.png");  // Call the generic function with the inventory screen image
}

void stats_screen()
{
    createScreen("inventoryScreen.png");  // Call the generic function with the inventory screen image
}

void rules_screen()
{
    createScreen("inventoryScreen.png");  // Call the generic function with the inventory screen image
}
